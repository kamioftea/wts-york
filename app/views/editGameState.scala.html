@import uk.co.goblinoid.GameActor.{TerrorUpdate, PrUpdate}
@import uk.co.goblinoid.GameState

@import helper._

@(gameState: GameState, terrorForm: Form[TerrorUpdate], prForm: Form[PrUpdate])(implicit messages: Messages)

@main() {
<div class="row full-width">
	<div class="small-12 large-3 large-push-9 columns">
		<h1>World Terror Rank</h1>
		<div class="panel callout">
			@form(action = routes.Status.updateTerror()) {
				@inputText(terrorForm("terror"))
				<button class="button primary" type="submit">Submit</button>
			}
		</div>
	</div>
	<div class="small-12 large-9 large-pull-3 columns">
		<div class="panel">
			<div class="row">
				<div class="small-12 large-5 columns text-center">
					<h1>Turn: @gameState.turn</h1>
				</div>
				<div class="small-12 large-5 columns text-center">
					<h1>Phase: @gameState.phase</h1>
				</div>
				<div class="small-12 large-2 columns text-right">
					@form(action = routes.Status.reset()) {
					<button class="button primary" type="submit">Reset</button>
					}
				</div>
			</div>
		</div>
		<div class="row">
			@for((countryName, countryPR) <- gameState.countryPRs) {
				<div class="small-6 large-3 columns">
					<div class="panel">
						<h1 class="text-center"><small>@countryName</small></h1>
						@defining(prForm.fill(PrUpdate(countryName, countryPR.pr))) { filledForm =>
							@form(action = routes.Status.updatePr()) {
								<input type="hidden" name="country" value="@filledForm("country").value">
								@inputText(filledForm("pr"))
								<button class="button primary" type="submit">Submit</button>
							}
						}
						<h2 class="text-center">
							@for((pr, income) <- countryPR.incomeLevels) {
								@if(pr == countryPR.pr) {
									<strong>@income</strong>
								} else {
									<small>@income</small>
								}
							}
						</h2>

					</div>
				</div>
			}
		</div>
	</div>
</div>
}
